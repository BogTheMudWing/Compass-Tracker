# Set dimension
execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] if data entity @s {Dimension: "minecraft:overworld"} if entity @a[team=Runner,gamemode=!spectator,distance=0..] run data modify storage manhunt:test Item set value {id: "minecraft:compass", count: 1, components: {"minecraft:custom_name": '{"text":"Tracker Compass","color": "aqua","italic": false}', "minecraft:lodestone_tracker": {target: {pos: [0,0,0], dimension: "minecraft:overworld"}, tracked: 0b}}}
execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] if data entity @s {Dimension: "minecraft:the_end"} if entity @a[team=Runner,gamemode=!spectator,distance=0..] run data modify storage manhunt:test Item set value {id: "minecraft:compass", count: 1, components: {"minecraft:custom_name": '{"text":"Tracker Compass","color": "aqua","italic": false}', "minecraft:lodestone_tracker": {target: {pos: [0,0,0], dimension: "minecraft:the_end"}, tracked: 0b}}}
execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] if data entity @s {Dimension: "minecraft:the_nether"} if entity @a[team=Runner,gamemode=!spectator,distance=0..] run data modify storage manhunt:test Item set value {id: "minecraft:compass", count: 1, components: {"minecraft:custom_name": '{"text":"Tracker Compass","color": "aqua","italic": false}', "minecraft:lodestone_tracker": {target: {pos: [0,0,0], dimension: "minecraft:the_nether"}, tracked: 0b}}}

# Set position by player
execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] at @s if entity @a[team=Runner,gamemode=!spectator,distance=0..] store result storage manhunt:test Item.components."minecraft:lodestone_tracker".target.pos[0] int 1 run data get entity @a[team=Runner,gamemode=!spectator,limit=1,sort=nearest] Pos[0]
execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] at @s if entity @a[team=Runner,gamemode=!spectator,distance=0..] store result storage manhunt:test Item.components."minecraft:lodestone_tracker".target.pos[1] int 1 run data get entity @a[team=Runner,gamemode=!spectator,limit=1,sort=nearest] Pos[1]
execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] at @s if entity @a[team=Runner,gamemode=!spectator,distance=0..] store result storage manhunt:test Item.components."minecraft:lodestone_tracker".target.pos[2] int 1 run data get entity @a[team=Runner,gamemode=!spectator,limit=1,sort=nearest] Pos[2]

# If endgame and no players in dimension, attempt to set by portal location
execute if score .endgame manhunt-options matches 1 if score .endgame-active manhunt-options matches 1 as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] at @s unless entity @a[team=Runner,gamemode=!spectator,distance=0..] if entity @e[type=marker,tag=manhunt.end-portal,distance=0..] run data modify storage manhunt:test Item set value {id: "minecraft:compass", count: 1, components: {"minecraft:custom_name": '{"text":"Tracker Compass","color": "aqua","italic": false}', "minecraft:lodestone_tracker": {target: {pos: [0,0,0], dimension: "minecraft:overworld"}, tracked: 0b}}}

# ......if endgame option is enabled................if endgame is active...............................as hunters who are holding compass..........................................................................................................................unless there is a runner in this dimension.....................if end portal marker exists
execute if score .endgame manhunt-options matches 1 if score .endgame-active manhunt-options matches 1 as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] at @s unless entity @a[team=Runner,gamemode=!spectator,distance=0..] if entity @e[type=marker,tag=manhunt.end-portal,distance=0..] store result storage manhunt:test Item.components."minecraft:lodestone_tracker".target.pos[0] int 1 run data get entity @e[type=marker,tag=manhunt.end-portal,limit=1,sort=nearest] Pos[0]
execute if score .endgame manhunt-options matches 1 if score .endgame-active manhunt-options matches 1 as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] at @s unless entity @a[team=Runner,gamemode=!spectator,distance=0..] if entity @e[type=marker,tag=manhunt.end-portal,distance=0..] store result storage manhunt:test Item.components."minecraft:lodestone_tracker".target.pos[1] int 1 run data get entity @e[type=marker,tag=manhunt.end-portal,limit=1,sort=nearest] Pos[1]
execute if score .endgame manhunt-options matches 1 if score .endgame-active manhunt-options matches 1 as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] at @s unless entity @a[team=Runner,gamemode=!spectator,distance=0..] if entity @e[type=marker,tag=manhunt.end-portal,distance=0..] store result storage manhunt:test Item.components."minecraft:lodestone_tracker".target.pos[2] int 1 run data get entity @e[type=marker,tag=manhunt.end-portal,limit=1,sort=nearest] Pos[2]

execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] in minecraft:overworld run data modify block 0 0 0 Items append from storage manhunt:test Item
execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] in minecraft:the_nether run data modify block 0 0 0 Items append from storage manhunt:test Item
execute as @a[nbt={SelectedItem: {id:"minecraft:compass",count:1,components:{"minecraft:custom_name":'{"color":"aqua","italic":false,"text":"Tracker Compass"}'}}}] in minecraft:the_end run data modify block 0 0 0 Items append from storage manhunt:test Item

