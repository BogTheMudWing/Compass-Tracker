# Set dimension
execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] if data entity @s {Dimension: "minecraft:overworld"} if entity @a[team=Runner,gamemode=!spectator,distance=0..] run data modify storage manhunt:test Item set value {id: "minecraft:compass", tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}, LodestoneTracked: 0b, LodestoneDimension: "minecraft:overworld", LodestonePos: {X: 0, Y: 0, Z: 0}}, Count: 1b}
execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] if data entity @s {Dimension: "minecraft:the_end"} if entity @a[team=Runner,gamemode=!spectator,distance=0..] run data modify storage manhunt:test Item set value {id: "minecraft:compass", tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}, LodestoneTracked: 0b, LodestoneDimension: "minecraft:the_end", LodestonePos: {X: 0, Y: 0, Z: 0}}, Count: 1b}
execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] if data entity @s {Dimension: "minecraft:the_nether"} if entity @a[team=Runner,gamemode=!spectator,distance=0..] run data modify storage manhunt:test Item set value {id: "minecraft:compass", tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}, LodestoneTracked: 0b, LodestoneDimension: "minecraft:the_nether", LodestonePos: {X: 0, Y: 0, Z: 0}}, Count: 1b}

# Set position by player
execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] at @s if entity @a[team=Runner,gamemode=!spectator,distance=0..] store result storage manhunt:test Item.tag.LodestonePos.X int 1 run data get entity @a[team=Runner,gamemode=!spectator,limit=1,sort=nearest] Pos[0]
execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] at @s if entity @a[team=Runner,gamemode=!spectator,distance=0..] store result storage manhunt:test Item.tag.LodestonePos.Y int 1 run data get entity @a[team=Runner,gamemode=!spectator,limit=1,sort=nearest] Pos[1]
execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] at @s if entity @a[team=Runner,gamemode=!spectator,distance=0..] store result storage manhunt:test Item.tag.LodestonePos.Z int 1 run data get entity @a[team=Runner,gamemode=!spectator,limit=1,sort=nearest] Pos[2]

# If endgame and no players in dimension, attempt to set by portal location
execute if score .endgame manhunt-options matches 1 if score .endgame-active manhunt-options matches 1 as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] at @s unless entity @a[team=Runner,gamemode=!spectator,distance=0..] if entity @e[type=marker,tag=manhunt.end-portal,distance=0..] run data modify storage manhunt:test Item set value {id: "minecraft:compass", tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}, LodestoneTracked: 0b, LodestoneDimension: "minecraft:overworld", LodestonePos: {X: 0, Y: 0, Z: 0}}, Count: 1b}

# ......if endgame option is enabled................if endgame is active...............................as hunters who are holding compass..........................................................................................................................unless there is a runner in this dimension.....................if end portal marker exists
execute if score .endgame manhunt-options matches 1 if score .endgame-active manhunt-options matches 1 as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] at @s unless entity @a[team=Runner,gamemode=!spectator,distance=0..] if entity @e[type=marker,tag=manhunt.end-portal,distance=0..] store result storage manhunt:test Item.tag.LodestonePos.X int 1 run data get entity @e[type=marker,tag=manhunt.end-portal,limit=1,sort=nearest] Pos[0]
execute if score .endgame manhunt-options matches 1 if score .endgame-active manhunt-options matches 1 as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] at @s unless entity @a[team=Runner,gamemode=!spectator,distance=0..] if entity @e[type=marker,tag=manhunt.end-portal,distance=0..] store result storage manhunt:test Item.tag.LodestonePos.Y int 1 run data get entity @e[type=marker,tag=manhunt.end-portal,limit=1,sort=nearest] Pos[1]
execute if score .endgame manhunt-options matches 1 if score .endgame-active manhunt-options matches 1 as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] at @s unless entity @a[team=Runner,gamemode=!spectator,distance=0..] if entity @e[type=marker,tag=manhunt.end-portal,distance=0..] store result storage manhunt:test Item.tag.LodestonePos.Z int 1 run data get entity @e[type=marker,tag=manhunt.end-portal,limit=1,sort=nearest] Pos[2]

execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] in minecraft:overworld run data modify block 0 0 0 Items append from storage manhunt:test Item
execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] in minecraft:the_nether run data modify block 0 0 0 Items append from storage manhunt:test Item
execute as @a[nbt={SelectedItem: {id: "minecraft:compass", Count: 1b, tag: {display: {Name: '{"text":"Tracker Compass","color": "aqua","italic": false}'}}}}] in minecraft:the_end run data modify block 0 0 0 Items append from storage manhunt:test Item

